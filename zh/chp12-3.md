---
layout: post
title: 源码开放学ARM - LCD 控制器 - LCD 时序图
---

## LCD Timing 时序
	
	
[LCD Timing 时序](http://img.dnbcw.info/20101110/oyro2422821.png)

	
	
	
# 驱动原理

## VGA 接口

	和串口的DB9进行区分
	
	和CRT显示原理进行对比学习
	
		CRT 显示原理
			组成： 发射枪（电子束） + 显示屏（荧光粉）
			扫描一场 (Frame) -> 扫描一行 + 回去 + 再扫描下一行
			场同步信号 -> 告诉电子枪，开始一个新的Frame
			行同步信号 -> 告诉电子枪，开始一个新的Line
			为何要有同步信号？需要 因为电子枪的移动是时间的。
				（磁场的转化需要时间，所以需要定义时间参数）
			消隐
	
		VGA 接口 
			5个信号：
			R: (red)  	模拟信号，一根线
			G: (green) 
			B: (blue) 
			VSYNC: 场同步 （打印时候清屏）
			VLINE: 行同步 （打印时候回车换行）
			VCLK: 像素时钟 （打印时候每一个字符）
	
		CH7005 芯片（U2）
			输出：RGB 模拟信号 + 场同步和行同步
			输入：16根数据线 (3-7, 10-15, 19-23) - (5,6,5)组合为16位颜色
				24位色：R-8, G-8, B-8 (16M色)
				16位色: R-5, G-6, B-5 (64K色)
				数字颜色信息(16位)，接在数据总线上。
			输入：IIC 总线 (IICSDA, IICSCLK)
				最终连接到了 S3C2410 芯片的 IIC 总线上
				控制信号的传递，用来初始化CH7005芯片。
			作用：就是把CPU输出的数字颜色转化为 VGA显示器能够接收的模拟信号
	
	
		S3C2410 芯片
			LCD 控制器 -> Signals -> (数字数据) CH7005 -> (模拟数据) VGA Interface 
	
			工作集中在两个部分： 
				LCD 控制器驱动 - (S3c2410 芯片手册)
				IIC 总线驱动-(2410芯片手册) - (CH7005初始化) (7005数据手册)
	
	
## LCD 控制器
	参考 2410 芯片数据手册 15章 LCD Controller P367
	#1 基本概念
	什么是 LCD 控制器(controller)?
	什么是 LCD 驱动器(Driver)？
	什么是 帧缓冲 (Frame Buffer) ?  
	The LCD controller in the S3C2410A consists of the logic for transferring LCD image data from a video buffer located in system memory to an external LCD driver.
	
	如果分辨率是 640 * 480 = 307200 (30万个像素才能组成一帧)
	如果每个像素有两种表示方式 (24bit 和 16bit), 
	24bit:  30万*3bytes=900000 bytes (900K)
	16bit:  30万*2bytes=600000 bytes (600K)，
	一般来说，只有放到 SDRAM 外部存储中，才有可能。（片内SRAM = 4K，放不下）
	
	LCD 驱动器一般是和 LCD的屏一起卖的。
	
	#2 工作参数
	LCD 控制器的主要工作参数有哪些？
	1. 行 和 列各有多少像素 (分辨率)   640列 * 480行
	2. 一个像素是1bit/2bit/4bit/8bit/16bit/24bit  (在帧缓冲区里，一个像素占多少bit)
	3. 接口时序 (interface timing) 一组时间参数（多个）
	4. 刷新频率 (确定了场同步信号多久来一个, 行同步信号多久来一个，位时钟是多久？)
	
	#3 信号描述
	LCD 控制器驱动管脚 Signal (LCD Interface Signals)
	VSYNC:	场同步 VFRAME
	HSYNC:  行同步 VLINE
	VCLK:	像素时钟 
	VD[23:0]: 数据线 (RGB)
	LCD_PWREN:  电源使能
	
	#4 内部结构
	LCD 内部结构框图：
	REGBANK：特殊功能寄存器 （进行配置和驱动编程）
	LCDCDMA：从FB把数据传送到内部
	VIDPRCS：从DMA来的数据进行格式转换
	TIMEGEN：通过获得REG寄存器的Timing配置信息，产生相应的时钟信号
	
	#5 时序
	TFT LCD Timing Example：
	
	LINEVAL： 479 + 1
	VSPW:  Width 场同步信号的宽度，在这个时间宽度内，留给电子枪回到屏幕的左上角位置就绪
	VBPD： Back 后肩
	VFPD:  Front 前肩
	
	HOZVAL： 639 + 1
	HSPW:  Width 行同步信号的宽度，在这个时间宽度内，留给电子枪回到屏幕的下一行起始位置就绪
	HBPD： Back 后肩
	HFPD:  Front 前肩
	
	#6 SFR (LCD CONTROLLER SPECIAL REGISTERS)
	2410 pdf P59 LCD SFR 总表
	P392 SFR 细节配置位：
	LCDCON1：使能Enable，BPP(bit/pixel)，MODE (TFT), VCLK (CLOCK)
	LCDCON2: V Timing (场/行)
	LCDCON3: H Timing (行/像素)
	LCDCON4: H Timing
	LCDCON5: Enable (交换), Polarity (同步脉冲极性反转)
	
	LCDSADDR1：FB_ADDR >> 1
	LCDSADDR2：LCDBASEL
	LCDSADDR3：OFFSIZE	PAGEWIDTH
	
	
	
		
	
	
	


[上一节](ch12-2.html)  |  [目录索引](../index.html)  |  [下一节](chp12-4.html)
