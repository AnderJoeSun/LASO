---
layout: post
title: 源码开放学ARM - I2C 控制器 - I2C 硬件连接
---

# I2C 控制器 #

## I2C 硬件连接
	
IIC（Inter-Integrated Circuit，I2C）总线是一种由PHILIPS公司开发的两线式串行总线，用于连接微处理器及其外围设备，
它的最主要优点是简单和有效。它只需要数据线SDA和时钟线SCL，就能够实现CPU与被控IC之间、IC与IC之间进行双向传送。

### I2C 引脚描述

* SCL 串行时钟线

* SDA 串行数据线

IIC启动和停止信号的定义

[起始和停止信号](http://hi.csdn.net/attachment/201112/4/0_1322988413IhAR.gif)



一，在主设备发送模式下，它的工作流程为：

1，首先配置IIC模式（包括配置GPE15,GPE14为第二功能 时钟线和数据线，iic中断使能，发送时钟频率等）

2，然后把从设备地址写入接收发送数据移位寄存器IICDS中，再把0xF0写入控制状态寄存器IICSTAT中，这时等待从设备发送应答信号

3，如果想要继续发送数据，那么在接收到应答信号后，再把待发送的数据写入寄存器IICDS中，清除中断标志后，再次等待应答信号；如果不想再发送数据了，那么把0x90写入寄存器IICSTAT中，清除中断标志并等待停止条件后，即完成了一次主设备的发送。


二，在主设备接收模式下，它的工作流程为：

1，首先配置IIC模式，然后把从设备地址写入接收发送数据移位寄存器IICDS中，再把0xB0写入控制状态寄存器IICSTAT中

2，这时等待从设备发送应答信号，如果想要接收数据，那么在应答信号后，读取寄存器IICDS，清除中断标志；如果不想接收数据了，那么就向寄存器IICSTAT写入0x90，清除中断标志并等待停止条件后，即完成了一次主设备的接收。



[上一节](chp15-6.html)  |  [目录索引](../index.html)  |  [下一节](chp16-2.html)
